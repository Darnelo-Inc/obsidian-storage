**traceroute** — это команда для диагностики сети, которая показывает путь (маршрут) следования пакетов от вашего компьютера до целевого IP-адреса или доменного имени. Она выявляет, через какие промежуточные устройства (“хопы” — роутеры и шлюзы) проходят пакеты.

---
## Для чего нужен traceroute?

- Проверять доступность узлов в Интернете и локальной сети
- Находить, где по пути есть задержки или потери (например, почему сайт “тормозит”)
- Определять, на каком этапе маршрута возникают сетевые проблемы или блокировки

---
## Как работает traceroute?

- traceroute отправляет пакет с невысоким “Time To Live” (TTL — “время жизни” пакета), например, =1.
- Первый же роутер на пути уменьшает TTL, он становится 0, и роутер возвращает ошибку ICMP (“TTL expired in transit”) с адресом этого роутера.
- traceroute увеличивает TTL (до 2, до 3 и т.д.), чтобы пакеты шаг за шагом проходили дальше.
- Таким образом, для каждого шага (хопа) программа “узнаёт”, как зовут следующий роутер на пути.

---
## Синтаксис

`traceroute <домен или IP>`

Примеры:

`traceroute google.com`

`traceroute 8.8.8.8`

В Linux бывает как отдельная команда traceroute, так и более современный аналог tracepath (если traceroute не установлен).

---
## Пример работы

`traceroute ya.ru`

Вывод может быть примерно таким:

1  192.168.0.1 (192.168.0.1)  2.3 ms  2.2 ms  2.3 ms
2  10.10.1.1 (10.10.1.1)  8.2 ms  7.1 ms  7.4 ms
3  100.64.0.1 (100.64.0.1)  15.1 ms  15.3 ms  15.3 ms
...
10  87.250.250.242 (87.250.250.242)  22.4 ms  21.8 ms  21.9 ms

Каждая строчка — это “хоп”: промежуточный узел (роутер), через который проходят пакеты.  
Числа — это время ответа (в миллисекундах) на каждом этапе, обычно делаются 3 попытки подряд.

---
## Ключевые моменты  

- Если на каком-то этапе в трассировке вы видите звездочки * * *, значит, этот роутер не отправил отклик (мог быть настроен фильтровать ICMP).
- Чем больше времени по задержкам — тем “дальше” или “нагруженней” этот маршрут/шлюз.
- traceroute настраивается множеством параметров (-n — не разрешать имена, -m — максимум хопов, -w — таймаут и т. д.).

---
## Основные опции

- -n — выводить только IP-адреса, не имена (быстрее):

`traceroute -n ya.ru`

- -m <max_hops> — ограничить число хопов:

`traceroute -m 15 ya.ru`

- -w <секунд> — таймаут ожидания ответа.

---
## Важно

- В Linux traceroute по умолчанию использует UDP-пакеты, а не ICMP, как Windows (там команда называется tracert).
- Иногда роутеры по пути могут “молчать” или фильтровать такие запросы — это нормально.